La metodología de este estudio sigue un enfoque reproducible y basado en datos abiertos para la estimación del precio de apartamentos en Bogotá. Todos los modelos se entrenaron utilizando validación cruzada de diez pliegues, lo que permitió obtener distribuciones de error comparables y aplicar posteriormente pruebas t de Student para evaluar diferencias significativas en el desempeño entre variantes. Asimismo, cada uno de los modelos —el modelo base, el modelo enriquecido y el modelo enriquecido optimizado— fue ajustado mediante una búsqueda independiente de hiperparámetros dentro de un mismo espacio de configuración, garantizando consistencia metodológica sin restringir la capacidad de cada modelo para encontrar su configuración óptima. El proceso completo abarca adquisición e integración de datos, análisis exploratorio, limpieza y transformación, enriquecimiento geoespacial, entrenamiento y comparación de modelos, selección del modelo final e implementación de una utilidad web para su uso práctico. La Figura~\ref{fig:metodologia_general} presenta una vista general del flujo metodológico.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.95\linewidth]{Images/metodologia/overview.png}
    \caption{Flujo general de la metodología desarrollada.}
    \label{fig:metodologia_general}
\end{figure}

\section{Adquisición e integración de datos}

El conjunto de datos principal se obtuvo a partir de una recopilación pública de inmuebles publicada en 2024. Este dataset incluye información estructural como área, baños, parqueaderos, estrato, antigüedad, estado, administración y coordenadas geográficas. Con el fin de reducir la heterogeneidad tipológica, el análisis se restringió exclusivamente a \textbf{apartamentos}, que representaban la categoría con mejor disponibilidad y coherencia estructural.

Durante las etapas iniciales se consideró la posibilidad de complementar esta información mediante técnicas de \textit{web scraping} aplicadas a portales inmobiliarios nacionales. Sin embargo, estos sitios emplean mecanismos estrictos de protección contra automatización y condiciones de uso que restringen la recolección automática de datos, lo cual limita la viabilidad técnica y legal de este enfoque. Por esta razón, y con el objetivo de garantizar transparencia y reproducibilidad, el estudio se basó exclusivamente en fuentes abiertas y en conjuntos de datos disponibles públicamente.

Para complementar la información base, se integraron capas oficiales del portal de Datos Abiertos de Bogotá, incluyendo barrios, UPZ, localidades, estratos y avalúos catastrales. Asimismo, se incorporaron puntos de interés (POIs) provenientes de OpenStreetMap. Todas las capas espaciales fueron cargadas en una base de datos PostGIS, lo que permitió realizar operaciones geográficas como intersecciones, cálculos de distancias y agregaciones por geohash.

\section{Exploración y análisis inicial de los datos}

El análisis exploratorio incluyó visualizaciones iniciales de las variables principales. Las Figuras~\ref{fig:area_log} y \ref{fig:precio_log} presentan la distribución original y transformada del área y del precio. Se observó una marcada asimetría en ambas variables, lo que justificó la aplicación de la transformación logarítmica para estabilizar la varianza y mejorar la linealidad de sus relaciones.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\linewidth]{Images/metodologia/area_log.png}
    \caption{Distribución del área antes y después de la transformación logarítmica.}
    \label{fig:area_log}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\linewidth]{Images/metodologia/precio_log.png}
    \caption{Distribución del precio antes y después de la transformación logarítmica.}
    \label{fig:precio_log}
\end{figure}

Se analizó la relación entre variables estructurales mediante un mapa de calor de correlaciones (Figura~\ref{fig:correlacion}). Este análisis mostró que el área y el estrato tenían la mayor correlación con el precio, mientras que variables como habitaciones, ascensor o piscina tenían correlaciones bajas, anticipando su menor utilidad en la predicción final.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\linewidth]{Images/metodologia/correlacion_heatmap.png}
    \caption{Mapa de calor de correlaciones entre variables estructurales.}
    \label{fig:correlacion}
\end{figure}

\section{Limpieza, imputación y transformación}

El dataset fue sometido a un proceso riguroso de depuración. Se eliminaron registros con coordenadas fuera del área urbana de Bogotá y valores atípicos definidos mediante percentiles, utilizando el percentil 99 para ambas variables (\textit{área} $> 464\ \text{m}^2$ y \textit{precio} $> 5.4\times 10^{9}$ COP). Asimismo, se descartaron registros inconsistentes con precios inferiores a 50 millones de pesos. Estos umbrales permitieron reducir el impacto de valores extremos sin afectar la distribución principal del conjunto de datos.

La imputación siguió una estrategia jerárquica: el área se imputó mediante la mediana de comparables dentro del mismo estrato, número de baños, parqueaderos y sector. El estrato y estado se imputaron con la moda del sector, mientras que la administración se imputó con la mediana del estrato. Variables con más de 70\% de ausencia fueron descartadas.

El precio se transformó aplicando el logaritmo natural, definiendo como variable objetivo \texttt{precio\_venta\_log}. La variable área también fue transformada logarítmicamente debido a su asimetría. Las variables numéricas se escalaron mediante \texttt{StandardScaler} y las categóricas se codificaron mediante \texttt{OneHotEncoder}.

\section{Enriquecimiento geoespacial}

El enriquecimiento geoespacial tuvo como propósito incorporar información del entorno urbano de cada inmueble y complementar las variables estructurales con características espaciales derivadas de su localización. Para ello se utilizó geohash de nivel 7, que agrupa propiedades dentro de celdas de tamaño uniforme (≈150 m), correspondientes al nivel de geohash más cercano a la escala de una cuadra, lo que disminuye la necesidad de cálculos punto a punto y facilita el procesamiento geoespacial dentro del pipeline de modelado.

A partir de las coordenadas geográficas se asignaron automáticamente el barrio, la UPZ y la localidad, utilizando las capas oficiales de datos abiertos del Distrito. Estas variables administrativas permiten representar jerarquías territoriales relevantes para la estructura urbana y constituyen candidatos naturales a mejorar la capacidad predictiva del modelo. Su incorporación se orientó a determinar si los límites administrativos codifican diferencias espaciales que no se encuentran explícitamente en las variables estructurales.

Los puntos de interés (POIs, por sus siglas en inglés Points of Interest) corresponden a entidades geográficas relevantes dentro del entorno urbano, tales como establecimientos educativos, centros de salud, comercios, parques o estaciones de transporte. Los POIs representan elementos del espacio construido que influyen directa o indirectamente en la valorización de un inmueble, ya sea por su impacto en la accesibilidad, la calidad de vida o la disponibilidad de servicios. En este trabajo se seleccionaron las categorías de POIs asociadas a usos cotidianos y equipamientos urbanos: educación, salud, comercio minorista, restaurantes y entretenimiento, parques y recreación, servicios culturales, servicios de infraestructura, alojamiento y transporte público (SITP y TransMilenio). Estas categorías presentan una cobertura homogénea en OpenStreetMap para la ciudad de Bogotá y permiten capturar variaciones del entorno urbano que no se encuentran explícitamente representadas en las características estructurales del inmueble.

Adicionalmente, se calcularon conteos de POIs dentro de radios de 100, 300, 500, 1000 y 2000 metros. Estos rangos fueron seleccionados porque representan escalas diferenciadas de accesibilidad alrededor del inmueble: distancias muy cortas asociadas al entorno inmediato (100--300 m), zonas de alcance habitual dentro del barrio (500 m), áreas de desplazamiento ampliado en recorridos peatonales o de corta movilidad (1000 m), y una escala vecinal más amplia que permite capturar la presencia de equipamientos mayores (2000 m). De esta manera, cada radio refleja un nivel distinto de interacción entre la propiedad y su entorno, permitiendo cuantificar la disponibilidad y concentración de servicios relevantes. La Tabla~\ref{tab:pois_radio} ilustra este proceso de agregación espacial mediante un ejemplo específico.

Como resultado de este proceso se incorporaron 45 nuevas variables derivadas de POIs, correspondientes a 8 categorías evaluadas en 5 radios alrededor de cada inmueble. Cada variable representa el número de establecimientos de un tipo particular dentro del radio correspondiente; sus valores pueden oscilar desde 0 (ausencia total de dicho servicio) hasta cifras superiores a 400 en zonas densamente equipadas. La Tabla~\ref{tab:estructura_pois} resume la organización sistemática de estas variables y su rango típico de valores.

Estas variables derivadas no solo permitieron explorar la influencia del entorno urbano en la valoración inmobiliaria, sino también evaluar redundancias espaciales y determinar qué información del contexto se encuentra ya implícitamente codificada en las características estructurales y administrativas del inmueble. Este enriquecimiento constituyó la base para la posterior selección de variables mediante SHAP y la construcción del modelo optimizado.

\begin{table}[ht]
\centering
\caption{Conteo de sitios cercanos por categoría y radio}
\label{tab:pois_radio}
\begin{tabular}{lrrrrr}
\hline
\textbf{Tipo de lugar} & \textbf{100m} & \textbf{300m} & \textbf{500m} & \textbf{1000m} & \textbf{2000m} \\
\hline
Educación                & 0 & 4   & 19  & 65  & 103 \\
Alojamiento              & 0 & 28  & 57  & 99  & 119 \\
Acceso a comercio        & 0 & 31  & 74  & 221 & 492 \\
Servicios culturales     & 0 & 5   & 14  & 47  & 76  \\
Parques y recreación     & 0 & 2   & 8   & 21  & 38  \\
Servicios de infraestructura & 0 & 10 & 28 & 72 & 156 \\
Restaurantes y entretenimiento & 0 & 125 & 237 & 455 & 705 \\
Salud                    & 0 & 0   & 4   & 16  & 64  \\
Estaciones SITP          & 0 & 0   & 22  & 61  & 204 \\
Estaciones TransMilenio  & 0 & 0   & 3   & 5   & 15  \\
\hline
\end{tabular}
\end{table}

\begin{table}[ht]
\centering
\small
\caption{Estructura de las variables geoespaciales derivadas de POIs}
\label{tab:estructura_pois}
\begin{tabular}{p{4cm} p{3cm} p{6cm}}
\hline
\textbf{Categoría de POI} & \textbf{Radios utilizados} & \textbf{Descripción y rango típico} \\
\hline
Educación & 100, 300, 500, 1000, 2000 m & Instituciones educativas; valores típicos: 0--100. \\
Salud & 100, 300, 500, 1000, 2000 m & Clínicas, hospitales y consultorios; 0--60. \\
Comercio minorista & 100, 300, 500, 1000, 2000 m & Tiendas, supermercados; 0--500. \\
Restaurantes y entretenimiento & 100, 300, 500, 1000, 2000 m & Restaurantes, cafés y bares; 0--700. \\
Alojamiento & 100, 300, 500, 1000, 2000 m & Hoteles y estancias; 0--120. \\
Parques y recreación & 100, 300, 500, 1000, 2000 m & Parques y zonas verdes; 0--40. \\
Servicios de infraestructura & 100, 300, 500, 1000, 2000 m & Servicios públicos y cajeros; 0--150. \\
Equipamientos culturales & 100, 300, 500, 1000, 2000 m & Bibliotecas, museos y centros culturales; 0--80. \\
\hline
\end{tabular}
\end{table}

\section{Construcción del modelo base}

El modelo base se desarrolló utilizando únicamente variables estructurales. Se evaluaron siete algoritmos: regresión lineal, Ridge, Lasso, SVR, Random Forest, LightGBM y XGBoost. Las métricas se calcularon mediante validación cruzada de diez pliegues. Los resultados se resumen en la Tabla~\ref{tab:modelos_base_cop} y la Figura~\ref{fig:rmse_modelos}.

\begin{table}[ht]
\centering
\small
\caption{Comparación inicial de algoritmos de regresión (RMSE en pesos colombianos).}
\label{tab:modelos_base_cop}
\begin{tabular}{lrr}
\hline
\textbf{Modelo} & \textbf{RMSE medio (COP)} & \textbf{RMSE std (COP)} \\
\hline
Random Forest      & \$244{,}712{,}600 & \$7{,}637{,}822 \\
XGBoost            & \$245{,}248{,}800 & \$6{,}392{,}930 \\
LightGBM           & \$246{,}264{,}200 & \$4{,}892{,}081 \\
KNN                & \$341{,}664{,}900 & \$5{,}987{,}948 \\
Decision Tree      & \$345{,}986{,}400 & \$8{,}217{,}641 \\
Linear Regression  & \$347{,}985{,}800 & \$4{,}397{,}948 \\
Lasso              & \$347{,}988{,}400 & \$4{,}402{,}652 \\
Ridge              & \$347{,}989{,}900 & \$4{,}437{,}838 \\
SVR                & \$913{,}333{,}600 & \$5{,}537{,}129 \\
\hline
\end{tabular}
\end{table}

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\linewidth]{Images/metodologia/rmse_modelos_base.png}
    \caption{Desempeño comparado de algoritmos del modelo base (RMSE).}
    \label{fig:rmse_modelos}
\end{figure}

El mejor desempeño fue obtenido por XGBoost utilizando su función de pérdida por defecto para regresión (\texttt{reg:squarederror}). El ajuste del modelo se realizó mediante una búsqueda aleatoria de hiperparámetros dentro del espacio definido en la Tabla~\ref{tab:xgb_param_search}, con el fin de explorar configuraciones que equilibraran complejidad, capacidad predictiva y generalización. Este mismo procedimiento de optimización se mantuvo en los modelos posteriores, variando únicamente el conjunto de variables disponibles en cada caso, con el propósito de asegurar comparabilidad metodológica entre todas las variantes evaluadas.

\begin{table}[ht]
\centering
\small
\caption{Descripción del espacio de búsqueda utilizado para XGBoost}
\label{tab:xgb_param_search}
\begin{tabular}{p{3.5cm} p{3cm} p{7.5cm}}
\hline
\textbf{Hiperparámetro} & \textbf{Rango} & \textbf{Justificación} \\
\hline
\texttt{n\_estimators} & [200, 500] & Limita el número de árboles para controlar complejidad y tiempo de entrenamiento, evitando sobreajuste observado con valores superiores a 800. \\

\texttt{max\_depth} & [3, 7] & Profundidades moderadas permiten capturar no linealidades sin producir árboles demasiado específicos. Previene sobreajuste y mantiene interpretabilidad. \\

\texttt{learning\_rate} & [0.02, 0.06] & Tasas de aprendizaje pequeñas estabilizan la contribución incremental de cada árbol y mejoran la generalización. Rango estrecho para evitar variabilidad extrema. \\

\texttt{subsample} & [0.7, 0.9] & Submuestreo evita correlación excesiva entre árboles y reduce varianza. Valores menores afectarían la estabilidad; valores mayores serían equivalentes a usar todo el conjunto. \\

\texttt{colsample\_bytree} & [0.7, 0.9] & Controla la proporción de características muestreadas por árbol, promoviendo diversidad en el ensamble y mitigando sobreajuste. \\

\texttt{min\_child\_weight} & [1, 6] & Penaliza divisiones con muestras pequeñas. Rango acotado para evitar tanto divisiones ruidosas como restricciones excesivas que impidan aprender patrones reales. \\

\texttt{gamma} & [0.0, 2.0] & Define el mínimo incremento en la pérdida para realizar una partición. El rango permite desde modelos más flexibles (0) hasta particiones conservadoras (2). \\

\texttt{reg\_lambda} & [0.5, 2.0] & Regularización L2 para controlar el tamaño de los pesos. Rango moderado que balancea flexibilidad y estabilidad del modelo. \\

\texttt{reg\_alpha} & [0.0, 0.5] & Regularización L1 para inducir sparsity y reducir complejidad. Se evita valores altos que podrían eliminar señales relevantes. \\
\hline
\end{tabular}
\label{tab:xgb_param_search}
\end{table}

\section{Construcción, evaluación e interpretabilidad del modelo enriquecido}

El modelo enriquecido tuvo como objetivo evaluar el aporte de las variables geoespaciales sobre la capacidad predictiva y explicativa del sistema. Para construir este modelo se integraron todas las variables derivadas del proceso de enriquecimiento espacial: conteos de puntos de interés en distintos radios, identificadores administrativos (barrio y UPZ), geohash nivel~7 y el avalúo catastral zonal. Todas estas variables fueron procesadas mediante el mismo \texttt{ColumnTransformer} utilizado en el modelo base, garantizando imputación, escalamiento y codificación categórica consistentes en todas las etapas del pipeline.

Con el fin de evaluar el comportamiento del conjunto enriquecido, se entrenaron y validaron varios algoritmos utilizados previamente en el modelo base: Linear Regression, Ridge, Lasso, Random Forest, LightGBM y XGBoost. El modelo SVR se descartó desde etapas anteriores por su bajo rendimiento y alto costo computacional. La evaluación se realizó mediante validación cruzada de diez pliegues, utilizando RMSE como métrica principal. Los resultados se presentan en la Tabla~\ref{tab:resultados_aumentado}.

\begin{table}[ht]
\centering
\small
\caption{Desempeño de algoritmos en el modelo enriquecido (10-Fold CV).}
\label{tab:resultados_aumentado}
\begin{tabular}{lcccc}
\hline
\textbf{Modelo} & \textbf{RMSE} & \textbf{RMSE std} & \textbf{MAE} & \textbf{$R^2$} \\
\hline
LightGBM          & 0.171 & 0.005 & 0.126 & 0.956 \\
XGBoost           & 0.171 & 0.005 & 0.126 & 0.956 \\
Random Forest     & 0.178 & 0.004 & 0.128 & 0.952 \\
Ridge             & 0.279 & 0.008 & 0.212 & 0.881 \\
Linear Regression & 0.280 & 0.009 & 0.212 & 0.880 \\
Lasso             & 0.337 & 0.007 & 0.263 & 0.827 \\
\hline
\end{tabular}
\end{table}

La comparación inicial evidenció que LightGBM y XGBoost presentaron desempeños equivalentes. Sin embargo, se seleccionó XGBoost para las siguientes etapas del análisis por dos razones metodológicas: (i) el modelo base ya había sido entrenado y optimizado con XGBoost, lo que permite comparar ambos modelos modificando exclusivamente el conjunto de variables y no el algoritmo; y (ii) XGBoost tiene una integración más estable y documentada con SHAP, lo cual es fundamental para el análisis interpretativo que guía la selección del subconjunto final de características.

Con el modelo enriquecido entrenado, se aplicó SHAP (\textit{SHapley Additive exPlanations}) para analizar la contribución local y global de cada característica después del preprocesamiento. La Figura~\ref{fig:shap_summary} presenta el \textit{SHAP Summary Plot}, que muestra la distribución del impacto de cada variable a nivel individual, mientras que la Figura~\ref{fig:shap_bar} resume la importancia global de las características mediante el valor SHAP absoluto promedio.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.5\linewidth]{Images/metodologia/shap_enriched_summary.png}
    \caption{SHAP Summary Plot del modelo enriquecido.}
    \label{fig:shap_summary}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.5\linewidth]{Images/metodologia/shap_enriched_barplot.png}
    \caption{Importancia global de las variables según valores SHAP.}
    \label{fig:shap_bar}
\end{figure}

El análisis permitió evaluar en qué medida las variables del entorno urbano —principalmente los valores agregados derivados de POIs, proximidad a servicios y atributos espaciales resumidos por geohash— aportaban información adicional frente al modelo base. Los resultados de SHAP mostraron que estas variables presentaron importancias promedio muy bajas, con valores cercanos a cero en la mayoría de observaciones, lo cual indica que su contribución marginal era absorbida por otras características más determinantes. En contraste, variables estructurales como el área, así como las coordenadas geográficas (latitud y longitud), concentraron prácticamente toda la señal relevante del modelo, evidenciando que gran parte del efecto espacial ya se encuentra implícito en la localización del inmueble. Con base en este ranking de importancias, se seleccionó un subconjunto de predictores para entrenar el \textit{modelo enriquecido optimizado}. Este modelo se ajustó utilizando una nueva búsqueda de hiperparámetros dentro del mismo espacio definido para el modelo base, garantizando consistencia metodológica y permitiendo comparar de manera directa el efecto de la selección de variables sobre el desempeño predictivo.

Los resultados detallados se reportan en la sección de validación cruzada, donde se contrastan los tres modelos (base, enriquecido y enriquecido optimizado) mediante métricas descriptivas y pruebas estadísticas.

\section{Modelo enriquecido optimizado}

A partir del análisis de importancia mediante SHAP se seleccionó un subconjunto reducido de variables con mayor aporte promedio, compuesto principalmente por características estructurales (área, baños, parqueaderos, administración), algunos atributos administrativos (antigüedad) y componentes geográficos esenciales (latitud y longitud). La mayoría de variables geoespaciales derivadas —como conteos de POIs y categorías OSM— mostraron contribución marginal, por lo que fueron descartadas en esta versión optimizada.

El modelo enriquecido optimizado se entrenó utilizando el mismo pipeline del modelo enriquecido, pero con una nueva búsqueda de hiperparámetros dentro del mismo espacio definido previamente, de modo que las diferencias en el desempeño reflejaran únicamente el efecto de la selección de variables y no configuraciones externas del modelo. La validación cruzada de diez pliegues produjo un RMSE promedio de 0.1584 (std 0.0082), un MAE de 0.1138 y un $R^{2} = 0.9600$. En la escala monetaria original, esto corresponde a un RMSE aproximado de \textbf{\$233 millones COP} y un MAE de \textbf{\$123 millones COP}. Estos valores ubican al modelo optimizado entre el modelo base y el modelo enriquecido, reduciendo el ruido introducido por variables geoespaciales con baja importancia, aunque sin alcanzar la precisión lograda por el modelo base.

Para evaluar si las diferencias eran significativas, se aplicaron pruebas t pareadas utilizando los valores de RMSE de los diez pliegues. Se encontraron diferencias significativas entre el modelo base y el enriquecido ($p = 5.49\times10^{-6}$), entre el modelo base y el optimizado ($p = 0.0112$), y entre el modelo enriquecido y el optimizado ($p = 0.000003$), indicando que reducir variables mejora la estabilidad del modelo enriquecido sin recuperar completamente la precisión del modelo base.

La Tabla~\ref{tab:comparacion_modelos_final} resume el desempeño de los tres modelos evaluados. Aunque el modelo base conserva la mayor precisión, el modelo optimizado ofrece mayor simplicidad y disminución en el error, constituyéndose en una alternativa eficiente dentro del conjunto enriquecido.

\begin{table}[ht]
\centering
\small
\caption{Comparación de desempeño entre los modelos evaluados (10-Fold CV, valores en millones de pesos).}
\label{tab:comparacion_modelos_final}
\begin{tabular}{lccccc}
\hline
\textbf{Modelo} & \textbf{RMSE (M\$)} & \textbf{RMSE std} & 
\textbf{MAE (M\$)} & \textbf{MAE std} & \textbf{$R^2$} \\
\hline
Base                    & 231 & 8   & 120 & 3  & 0.965 \\
Enriquecido             & 257 & 12  & 138 & 5  & 0.956 \\
Enriquecido optimizado  & 233 & 14  & 123 & 5  & 0.960 \\
\hline
\end{tabular}
\end{table}


\section{Implementación del sistema web}

El sistema desarrollado integra un \textbf{backend en FastAPI}, una base de datos \textbf{PostgreSQL con PostGIS} y una interfaz \textbf{frontend en ReactJS}. Su propósito es permitir que un usuario ingrese la información básica de un inmueble y obtenga, en tiempo real, una estimación de precio junto con estadísticas del entorno urbano. La Figura~\ref{fig:arquitectura_sistema} presenta una vista general de la arquitectura implementada.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.9\linewidth]{Images/metodologia/arquitectura_app.png}
    \caption{Arquitectura general del sistema web desarrollado.}
    \label{fig:arquitectura_sistema}
\end{figure}


Durante la fase de preparación de datos, el conjunto de propiedades utilizado para el entrenamiento del modelo fue enriquecido con información geográfica y posteriormente se generaron \textbf{estadísticos agregados por barrio, UPZ y localidad}, incluyendo valores promedio de área, administración, estrato y precio estimado. Estos datos derivados se almacenaron en la base de datos PostgreSQL para permitir su recuperación eficiente cuando el usuario consulta la aplicación. Adicionalmente, el modelo final (enriquecido optimizado) fue exportado a un archivo \texttt{.pkl}, lo que facilita su carga y ejecución dentro del backend sin necesidad de reconstruir el pipeline completo en cada solicitud.

El backend recibe las solicitudes provenientes del frontend y ejecuta tres tareas principales: (i) geocodificación de la dirección ingresada mediante el servicio Nominatim; (ii) asignación automática de barrio y UPZ utilizando consultas espaciales en PostGIS; y (iii) ejecución del modelo optimizado para generar la estimación de precio. La respuesta enviada al frontend incluye tanto la predicción como un conjunto de métricas contextuales del sector, obtenidas directamente desde las tablas agregadas precomputadas en la base de datos.

En la aplicación frontend, la interacción inicia con un formulario donde el usuario ingresa las características físicas del inmueble (área, baños, parqueaderos, antigüedad, estrato y administración). En una segunda pantalla se solicita la \textbf{dirección}, que es geocodificada automáticamente para obtener las coordenadas iniciales. Estas coordenadas se muestran en un mapa interactivo implementado con \texttt{Leaflet}, permitiendo al usuario mover el marcador manualmente para ajustar la ubicación con mayor precisión si lo desea.

Una vez confirmados los datos, la aplicación presenta un \textbf{reporte interactivo}. Este reporte incluye:  
(1) un mapa con los puntos de interés cercanos al inmueble en distintos radios de distancia;  
(2) una tabla con los conteos de POIs por categoría y radio;  
(3) comparaciones visuales entre las características del inmueble y los promedios del barrio, la UPZ y la localidad;  
(4) gráficos que resumen estadísticas relevantes del entorno urbano.  
Ejemplos de estas visualizaciones se muestran en las Figuras~\ref{fig:reporte_mapa_pois} y~\ref{fig:comparacion_estadisticas}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\linewidth]{Images/metodologia/reporte_mapa.png}
    \caption{Vista del reporte generado: mapa con puntos de interés cercanos.}
    \label{fig:reporte_mapa_pois}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\linewidth]{Images/metodologia/reporte_comparativa_barrio.png}
    \caption{Comparativa entre las características del inmueble y los promedios del barrio y la UPZ.}
    \label{fig:comparacion_estadisticas}
\end{figure}

Este diseño permite que el modelo predictivo se integre en una plataforma accesible y comprensible para el usuario final, ofreciendo no solo una estimación numérica sino una contextualización completa del entorno urbano, lo cual facilita la interpretación del resultado y mejora la utilidad práctica del sistema en escenarios de consulta inmobiliaria.
